<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Artificial Memory Leak</title>
  </head>

  <body>
    <h1>Artificial Memory Leak</h1>

    <h2>Keys in dict: <span id="counter">?</span></h2>

    <input
      type="button"
      value="Click me to leak memory"
      onclick="startLeak()"
    />

    <script type="text/javascript">
      var cache = {};
      var ctr = document.getElementById("counter");

      var i = 0;

      function startLeak() {
        setInterval(function () {
          cache[i++] = JSON.parse(JSON.stringify(cache));
          ctr.innerHTML = i;
        }, 500);
      }
    </script>
  </body>
</html>
